"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var List=function(){function t(){_classCallCheck(this,t),this.$onarrows=$(".good-increase"),this.$uparrows=$(".good-decrease"),this.$buy=$(".good-addcart"),this.$cart=$("#cart"),this.$sum=$(".t_cart_num"),this.addEvent(),this.init()}return _createClass(t,[{key:"addEvent",value:function(){var a=this;this.$cart.on("click",function(){location.href="cart.html"}),this.$buy.each(function(t,e){$(e).on("click",function(t){var e=$(this).parents("li").attr("data-good-id"),i=$(this).parents("li").find("img").attr("src"),n=$(this).parents("li").find(".good-price").text(),r=$(this).parents("li").find(".good-name").text(),o=$.cookie("carts")?$.cookie("carts"):"",o=a.convertStrToObj(o);e in o?o[e].num++:o[e]={name:r,price:n,src:i,num:1},$.cookie("carts",JSON.stringify(o),{expires:5,path:"/"})})})}},{key:"convertStrToObj",value:function(t){return t?JSON.parse(t):{}}},{key:"init",value:function(){var t,e=$.cookie("carts")?$.cookie("carts"):"",i=this.convertStrToObj(e),n=0;for(t in i)n+=i[t].num;this.$cart.val("购物车(".concat(n,")")),$(".good-increase").each(function(t,e){$(e).click(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),e=$.cookie("carts")?$.cookie("carts"):"",e=_this.convertStrToObj(e);1<e[t].num&&e[t].num++,$.cookie("carts",JSON.stringify(e),{expires:5,path:"/"}),$(this).next().val(e[t].num),$(this).parent().next().text(e[t].price*e[t].num)})})}}]),t}();new List;